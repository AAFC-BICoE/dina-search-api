# Default service endpoints
#
# Endpoints are closely related to the JSONSpec DINA objects defined in
# DINA schemas.
#
# Entries declared in the relationships' section correspond to objects to
# be included during the retrieval of their parent object.
#
# For example in the material-sample example, without an entry for collectingEvent
# or preparationType these objects will not be automatically included. 
# Augmentation of objects is done using the same endpoint when external object references
# are found during processing of an object.
#

# apiResources links a type to an url to find a resource
apiResources:
  - type: material-sample
    url: ${MATERIAL_SAMPLE_URL:http://localhost:8085/api/v1/material-sample}
  - type: person
    url: ${PERSON_URL:http://localhost:8082/api/v1/person}
  - type: storage-unit
    url: ${STORAGE_UNIT_URL:http://localhost:8085/api/v1/storage-unit}
  - type: metadata
    url: ${METADATA_URL:http://localhost:8081/api/v1/metadata}
  - type: transaction
    url: ${LOAN_TRANSACTION_URL:http://localhost:8086/api/v1/transaction}
  - type: generic-molecular-analysis-run-item
    url: ${SEQDB_API_URL:http://localhost:8084/api/v1/}generic-molecular-analysis-run-item

indexSettings:
  - indexName: dina_material_sample_index
    type: material-sample
    relationships:
      - collectingEvent
      - organism
      - attachment
      - collection
      - preparedBy
      - preparationType
      - preparationMethod
      - assemblages
      - projects
      - hierarchy
      - storageUnitUsage
      - parentMaterialSample
    relationshipsType:
      - person
      - collecting-event
    reverseRelationships:
      - type: generic-molecular-analysis-run-item
        relationshipName: materialSample

  - indexName: dina_object_store_index
    type: metadata
    relationships:
      - acMetadataCreator
      - dcCreator
      - derivatives
    relationshipsType:
      - person
      - derivative

  - indexName: dina_agent_index
    type: person
    relationships:
      - organizations
    relationshipsType:
      - organization

  - indexName: dina_storage_index
    type: storage-unit
    relationships:
      - storageUnitChildren
      - storageUnitType
      - hierarchy

  - indexName: dina_loan_transaction_index
    type: transaction
    relationships:
      - involvedAgents
      - materialSamples
